---
- name: Initialise opam
  command: opam init -y
  register: opaminit
- debug: msg="{{ opaminit }}"
- name: Pin opam-sysinstall
  command: "opam pin add opam-sysinstall git+https://github.com/patricoferris/opam-sysinstall --yes"
- name: Install opam
  command: opam install opam-sysinstall --yes
- name: Opam System Compilers Directory
  file:
    path: ~/ocaml
    state: directory
- name: Install a system compiler
  command: opam exec -- opam sysinstall build --latest=1 --prefix=~/ocaml --jobs=4